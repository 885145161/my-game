import{g as e,c as t,s,a as i,w as l,i as a,o as h,b as o,d as n,e as r,t as c,f as d,h as u,j as y,k as f}from"./index-BvAGkW9r.js";const m=((e,t)=>{const s=e.__vccOpts||e;for(const[i,l]of t)s[i]=l;return s})({data:()=>({ctx:null,screenWidth:0,screenHeight:0,isPlaying:!1,gameOver:!1,score:0,timer:null,coins:100,isDoubleFire:!1,doubleFireTimer:null,player:{x:0,y:0,width:40,height:40,color:"#00ff00"},bullets:[],enemies:[],enemyBullets:[],frameCount:0}),onReady(){const s=e();this.screenWidth=s.windowWidth,this.screenHeight=s.windowHeight,this.player.x=this.screenWidth/2-20,this.player.y=this.screenHeight-100,this.ctx=t("gameCanvas",this),this.draw()},methods:{startGame(){this.isPlaying=!0,this.gameOver=!1,this.score=0,this.coins=100,this.isDoubleFire=!1,clearInterval(this.doubleFireTimer),this.bullets=[],this.enemies=[],this.enemyBullets=[],this.frameCount=0,clearInterval(this.timer),this.timer=setInterval(this.gameLoop,30)},restartGame(){this.startGame()},gameLoop(){if(!this.isPlaying)return;this.frameCount++;const e=this.isDoubleFire?5:10;if(this.frameCount%e==0&&(this.bullets.push({x:this.player.x+this.player.width/2,y:this.player.y,radius:4,speed:12,type:"player"}),this.isDoubleFire&&(this.bullets.push({x:this.player.x+this.player.width/4,y:this.player.y+10,radius:4,speed:12,type:"player"}),this.bullets.push({x:this.player.x+3*this.player.width/4,y:this.player.y+10,radius:4,speed:12,type:"player"}))),this.frameCount%40==0){const e=30+20*Math.random();this.enemies.push({x:Math.random()*(this.screenWidth-e),y:-e,width:e,height:e,speed:2+3*Math.random(),hp:1,shootCounter:Math.floor(100*Math.random())})}for(let t=this.bullets.length-1;t>=0;t--){const e=this.bullets[t];e.y-=e.speed,e.y<0&&this.bullets.splice(t,1)}for(let t=this.enemyBullets.length-1;t>=0;t--){const e=this.enemyBullets[t];if(e.y+=e.speed,this.checkCollision(this.player,e,!0))return void this.endGame();e.y>this.screenHeight&&this.enemyBullets.splice(t,1)}for(let t=this.enemies.length-1;t>=0;t--){const e=this.enemies[t];if(e.y+=e.speed,e.shootCounter++,e.shootCounter%150==0&&e.y>0&&e.y<this.screenHeight-100&&this.enemyBullets.push({x:e.x+e.width/2,y:e.y+e.height,radius:3,speed:5,type:"enemy"}),this.checkRectCollision(this.player,e))return void this.endGame();if(e.y>this.screenHeight)this.enemies.splice(t,1);else for(let s=this.bullets.length-1;s>=0;s--){const i=this.bullets[s];if(i.x>e.x&&i.x<e.x+e.width&&i.y>e.y&&i.y<e.y+e.height){this.enemies.splice(t,1),this.bullets.splice(s,1);const e=this.score;this.score+=10,Math.floor(this.score/100)>Math.floor(e/100)&&this.coins++;break}}}this.draw()},draw(){const e=this.ctx;if(e.setFillStyle("#1a1a1a"),e.fillRect(0,0,this.screenWidth,this.screenHeight),this.isPlaying){const t=this.player,s=t.x+t.width/2,i=t.y+t.height;e.setFillStyle(this.isDoubleFire?"#ff3b30":"#4eacff"),e.beginPath(),e.moveTo(s-8,i+5),e.lineTo(s+8,i+5),e.lineTo(s+2,i-5),e.lineTo(s-2,i-5),e.closePath(),e.fill(),e.setFillStyle("#4cd964"),e.beginPath(),e.moveTo(s,t.y),e.lineTo(t.x+t.width,i),e.lineTo(t.x,i),e.closePath(),e.fill(),e.setFillStyle("#1e3f24"),e.beginPath(),e.arc(s,t.y+t.height/3,5,0,2*Math.PI),e.fill(),e.setFillStyle("#f0ad4e"),this.bullets.forEach((t=>{e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI),e.fill()})),e.setFillStyle("#ffffff"),this.enemyBullets.forEach((t=>{e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI),e.fill()})),e.setFillStyle("#dd524d"),this.enemies.forEach((t=>{const s=t.x+t.width/2,i=t.y+t.height/2;e.beginPath(),e.moveTo(s,t.y),e.lineTo(t.x+t.width,i),e.lineTo(s,t.y+t.height),e.lineTo(t.x,i),e.closePath(),e.fill()}))}e.draw()},handleTouchMove(e){if(!this.isPlaying)return;let t=e.touches[0];this.player.x=t.x-this.player.width/2,this.player.y=t.y-this.player.height/2},buyUpgrade(){this.coins<50?s({title:"é‡‘å¸ä¸è¶³ï¼",icon:"none"}):this.isDoubleFire?s({title:"åŒå€ç«åŠ›å·²æ¿€æ´»",icon:"none"}):(this.coins-=50,this.isDoubleFire=!0,s({title:"åŒå€ç«åŠ›æ¿€æ´» (10ç§’)",icon:"success"}),clearTimeout(this.doubleFireTimer),this.doubleFireTimer=setTimeout((()=>{this.isDoubleFire=!1,s({title:"åŒå€ç«åŠ›ç»“æŸ",icon:"none"})}),1e4))},checkRectCollision:(e,t)=>e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y,checkCollision(e,t,s){if(s){const s=e.x+e.width/2,i=e.y+e.height/2,l=s-t.x,a=i-t.y;return Math.sqrt(l*l+a*a)<e.width/2+2*t.radius}return this.checkRectCollision(e,t)},endGame(){this.isPlaying=!1,this.gameOver=!0,clearInterval(this.timer),clearTimeout(this.doubleFireTimer)},handleTouchStart(){},handleTouchEnd(){}}},[["render",function(e,t,s,m,p,g){const b=u,x=a,T=y,v=f;return h(),i(x,{class:"container"},{default:l((()=>[o(b,{"canvas-id":"gameCanvas",id:"gameCanvas",class:"game-canvas",onTouchstart:g.handleTouchStart,onTouchmove:n(g.handleTouchMove,["prevent"]),onTouchend:g.handleTouchEnd},null,8,["onTouchstart","onTouchmove","onTouchend"]),o(x,{class:"ui-layer"},{default:l((()=>[o(x,{class:"top-bar"},{default:l((()=>[o(x,{class:"score"},{default:l((()=>[r("åˆ†æ•°: "+c(p.score),1)])),_:1}),o(x,{class:"coins"},{default:l((()=>[r("é‡‘å¸: "+c(p.coins),1)])),_:1})])),_:1}),o(x,{class:"shop-btn-container"},{default:l((()=>[o(T,{class:"shop-btn",onClick:g.buyUpgrade,disabled:!p.isPlaying||p.isDoubleFire||p.coins<50},{default:l((()=>[r(" åŒå€ç«åŠ› (50é‡‘å¸) ")])),_:1},8,["onClick","disabled"]),p.isDoubleFire?(h(),i(x,{key:0,class:"upgrade-status"},{default:l((()=>[r(" ç«åŠ›ç¿»å€ä¸­... ")])),_:1})):d("",!0)])),_:1}),p.gameOver?(h(),i(x,{key:0,class:"game-over-modal"},{default:l((()=>[o(v,{class:"game-over-text"},{default:l((()=>[r("æ¸¸æˆç»“æŸ")])),_:1}),o(v,{class:"final-score"},{default:l((()=>[r("æœ€ç»ˆå¾—åˆ†: "+c(p.score),1)])),_:1}),o(T,{class:"restart-btn",onClick:g.restartGame},{default:l((()=>[r("é‡æ–°å¼€å§‹")])),_:1},8,["onClick"])])),_:1})):d("",!0),p.isPlaying||p.gameOver?d("",!0):(h(),i(x,{key:1,class:"start-modal new-start-modal"},{default:l((()=>[o(x,{class:"logo-placeholder"},{default:l((()=>[r(" ðŸš€ ")])),_:1}),o(v,{class:"title new-title"},{default:l((()=>[r("é›·éœ†æˆ˜æœº")])),_:1}),o(T,{class:"start-btn new-start-btn",onClick:g.startGame},{default:l((()=>[r("å¼€å§‹æˆ˜æ–—")])),_:1},8,["onClick"]),o(v,{class:"tip"},{default:l((()=>[r("æ‰‹æŒ‡æ‹–åŠ¨é£žæœºç§»åŠ¨ï¼Œè‡ªåŠ¨å°„å‡»")])),_:1})])),_:1}))])),_:1})])),_:1})}],["__scopeId","data-v-2af505b9"]]);export{m as default};
