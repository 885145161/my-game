import{g as e,c as t,a as s,w as i,i as a,o as h,b as l,d as r,t as n,e as o,f as c,h as d,j as y}from"./index-DxDMbExu.js";const u=((e,t)=>{const s=e.__vccOpts||e;for(const[i,a]of t)s[i]=a;return s})({data:()=>({ctx:null,screenWidth:0,screenHeight:0,isPlaying:!1,gameOver:!1,score:0,timer:null,player:{x:0,y:0,width:40,height:40,color:"#00ff00"},bullets:[],enemies:[],frameCount:0}),onReady(){const s=e();this.screenWidth=s.windowWidth,this.screenHeight=s.windowHeight,this.player.x=this.screenWidth/2-20,this.player.y=this.screenHeight-100,this.ctx=t("gameCanvas",this),this.draw()},methods:{startGame(){this.isPlaying=!0,this.gameOver=!1,this.score=0,this.bullets=[],this.enemies=[],this.frameCount=0,clearInterval(this.timer),this.timer=setInterval(this.gameLoop,30)},restartGame(){this.startGame()},gameLoop(){if(this.isPlaying){if(this.frameCount++,this.frameCount%10==0&&this.bullets.push({x:this.player.x+this.player.width/2,y:this.player.y,radius:4,speed:10}),this.frameCount%40==0){const e=30+20*Math.random();this.enemies.push({x:Math.random()*(this.screenWidth-e),y:-e,width:e,height:e,speed:2+3*Math.random(),hp:1})}for(let e=this.bullets.length-1;e>=0;e--){const t=this.bullets[e];t.y-=t.speed,t.y<0&&this.bullets.splice(e,1)}for(let e=this.enemies.length-1;e>=0;e--){const t=this.enemies[e];if(t.y+=t.speed,this.checkRectCollision(this.player,t))return void this.endGame();if(t.y>this.screenHeight)this.enemies.splice(e,1);else for(let s=this.bullets.length-1;s>=0;s--){const i=this.bullets[s];if(i.x>t.x&&i.x<t.x+t.width&&i.y>t.y&&i.y<t.y+t.height){this.enemies.splice(e,1),this.bullets.splice(s,1),this.score+=10;break}}}this.draw()}},draw(){const e=this.ctx;e.setFillStyle("#1a1a1a"),e.fillRect(0,0,this.screenWidth,this.screenHeight),this.isPlaying&&(e.beginPath(),e.moveTo(this.player.x+this.player.width/2,this.player.y),e.lineTo(this.player.x+this.player.width,this.player.y+this.player.height),e.lineTo(this.player.x,this.player.y+this.player.height),e.closePath(),e.setFillStyle("#4cd964"),e.fill(),e.setFillStyle("#f0ad4e"),this.bullets.forEach((t=>{e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI),e.fill()})),e.setFillStyle("#dd524d"),this.enemies.forEach((t=>{e.fillRect(t.x,t.y,t.width,t.height)}))),e.draw()},handleTouchMove(e){if(!this.isPlaying)return;let t=e.touches[0];this.player.x=t.x-this.player.width/2,this.player.y=t.y-this.player.height/2},checkRectCollision:(e,t)=>e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y,endGame(){this.isPlaying=!1,this.gameOver=!0,clearInterval(this.timer)},handleTouchStart(){},handleTouchEnd(){}}},[["render",function(e,t,u,m,f,g){const p=c,x=a,v=d,w=y;return h(),s(x,{class:"container"},{default:i((()=>[l(p,{"canvas-id":"gameCanvas",id:"gameCanvas",class:"game-canvas",onTouchstart:g.handleTouchStart,onTouchmove:g.handleTouchMove,onTouchend:g.handleTouchEnd},null,8,["onTouchstart","onTouchmove","onTouchend"]),l(x,{class:"ui-layer"},{default:i((()=>[l(x,{class:"score"},{default:i((()=>[r("分数: "+n(f.score),1)])),_:1}),f.gameOver?(h(),s(x,{key:0,class:"game-over-modal"},{default:i((()=>[l(v,{class:"game-over-text"},{default:i((()=>[r("游戏结束")])),_:1}),l(v,{class:"final-score"},{default:i((()=>[r("最终得分: "+n(f.score),1)])),_:1}),l(w,{class:"restart-btn",onClick:g.restartGame},{default:i((()=>[r("重新开始")])),_:1},8,["onClick"])])),_:1})):o("",!0),f.isPlaying||f.gameOver?o("",!0):(h(),s(x,{key:1,class:"start-modal"},{default:i((()=>[l(v,{class:"title"},{default:i((()=>[r("雷霆战机")])),_:1}),l(w,{class:"start-btn",onClick:g.startGame},{default:i((()=>[r("开始游戏")])),_:1},8,["onClick"]),l(v,{class:"tip"},{default:i((()=>[r("手指拖动飞机移动，自动射击")])),_:1})])),_:1}))])),_:1})])),_:1})}],["__scopeId","data-v-0ca11ef3"]]);export{u as default};
